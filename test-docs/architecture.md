# 系统架构

## 整体架构

系统采用前后端分离的架构设计：

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   前端界面      │    │   后端服务      │    │   文件系统      │
│                 │    │                 │    │                 │
│ - HTML/CSS/JS   │◄──►│ - Rust/Axum     │◄──►│ - Markdown 文档 │
│ - 搜索界面      │    │ - 搜索引擎      │    │ - 目录结构      │
│ - 文档渲染      │    │ - API 接口      │    │ - 索引数据      │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## 核心组件

### 1. 文档树构建器
负责扫描文档目录，构建文件树结构，同时建立搜索索引。

### 2. 搜索引擎
- **索引构建**：在启动时读取所有 Markdown 文件内容
- **全文搜索**：支持关键词匹配和相关性评分
- **结果排序**：根据匹配度和位置权重排序

### 3. Web 服务器
基于 Axum 框架，提供以下 API：
- `/api/file` - 获取文件内容
- `/api/search` - 全文搜索
- `/api/tree` - 获取目录树
- `/api/stats` - 获取统计信息

### 4. 前端界面
- 响应式设计，支持桌面和移动设备
- 实时搜索，300ms 防抖优化
- 搜索结果高亮和上下文预览
- 主题切换和个性化设置

## 搜索算法

搜索引擎使用智能评分算法：

1. **基础匹配**：1.0 分
2. **标题匹配**：3.0 倍权重
3. **完整词匹配**：2.0 倍权重
4. **行首匹配**：1.5 倍权重
5. **文件名匹配**：额外 2.0 分奖励

最终按相关性得分降序排列，限制返回前 50 个结果。